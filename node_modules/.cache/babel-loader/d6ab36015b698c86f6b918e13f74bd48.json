{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/chaowu/Desktop/CS349/tictactoe/src/App.js\";\nimport './App.css';\nimport React from 'react';\nexport default class App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      rows: 6,\n      columns: 7,\n      moves: [],\n      history: [{\n        moves: [],\n        playerTurn: 'blue'\n      }],\n      playerTurn: 'red',\n      stepNumber: 0\n    };\n\n    this.resetBoard = () => {\n      this.setState({\n        moves: [],\n        winner: null\n      });\n    };\n\n    this.getPiece = (x, y) => {\n      // console.log(this.state.stepNumber);\n      // console.log(this.state.moves.length);\n      let moves = this.state.moves.slice(0, this.state.stepNumber);\n      const list = moves.filter(item => {\n        return item.x === x && item.y === y;\n      });\n      return list[0];\n    };\n\n    this.isWinner = (x, y) => {\n      const {\n        winner,\n        winningMoves\n      } = this.state;\n\n      if (!winner) {\n        return false;\n      }\n\n      return winningMoves.some(item => item.x === x && item.y === y);\n    };\n\n    this.checkWinner = (x, y, player) => {\n      //check vertically\n      let winningMoves = [{\n        x,\n        y\n      }];\n\n      for (let column = x + 1; column < x + 4; column += 1) {\n        const checkPiece = this.getPiece(column, y);\n\n        if (checkPiece && checkPiece.player === player) {\n          winningMoves.push({\n            x: column,\n            y: y\n          });\n        } else {\n          break;\n        }\n      }\n\n      for (let column = x - 1; column > x - 4; column -= 1) {\n        const checkPiece = this.getPiece(column, y);\n\n        if (checkPiece && checkPiece.player === player) {\n          winningMoves.push({\n            x: column,\n            y: y\n          });\n        } else {\n          break;\n        }\n      }\n\n      if (winningMoves.length > 3) {\n        console.log('winner', winningMoves);\n        this.setState({\n          winner: player,\n          winningMoves\n        });\n        return true;\n      } //check horizontally\n\n\n      winningMoves = [{\n        x,\n        y\n      }];\n\n      for (let row = y + 1; row < y + 4; row += 1) {\n        const checkPiece = this.getPiece(x, row);\n\n        if (checkPiece && checkPiece.player === player) {\n          winningMoves.push({\n            x: x,\n            y: row\n          });\n        } else {\n          break;\n        }\n      }\n\n      for (let row = y - 1; row > y - 4; row -= 1) {\n        const checkPiece = this.getPiece(x, row);\n\n        if (checkPiece && checkPiece.player === player) {\n          winningMoves.push({\n            x: x,\n            y: row\n          });\n        } else {\n          break;\n        }\n      }\n\n      if (winningMoves.length > 3) {\n        console.log('winner', winningMoves);\n        this.setState({\n          winner: player,\n          winningMoves\n        });\n        return true;\n      } //check diagnalleft\n\n\n      winningMoves = [{\n        x,\n        y\n      }];\n\n      for (let i = 1; i < 4; i += 1) {\n        const checkPiece = this.getPiece(x + i, y + i);\n\n        if (checkPiece && checkPiece.player === player) {\n          winningMoves.push({\n            x: x + i,\n            y: y + i\n          });\n        } else {\n          break;\n        }\n      }\n\n      for (let i = 1; i < 4; i += 1) {\n        const checkPiece = this.getPiece(x - i, y - i);\n\n        if (checkPiece && checkPiece.player === player) {\n          winningMoves.push({\n            x: x - i,\n            y: y - i\n          });\n        } else {\n          break;\n        }\n      }\n\n      if (winningMoves.length > 3) {\n        console.log('winner', winningMoves);\n        this.setState({\n          winner: player,\n          winningMoves\n        });\n        return true;\n      } //check diagnalright\n\n\n      winningMoves = [{\n        x,\n        y\n      }];\n\n      for (let i = 1; i < 4; i += 1) {\n        const checkPiece = this.getPiece(x - i, y + i);\n\n        if (checkPiece && checkPiece.player === player) {\n          winningMoves.push({\n            x: x - i,\n            y: y + i\n          });\n        } else {\n          break;\n        }\n      }\n\n      for (let i = 1; i < 4; i += 1) {\n        const checkPiece = this.getPiece(x + i, y - i);\n\n        if (checkPiece && checkPiece.player === player) {\n          winningMoves.push({\n            x: x + i,\n            y: y - i\n          });\n        } else {\n          break;\n        }\n      }\n\n      if (winningMoves.length > 3) {\n        console.log('winner', winningMoves);\n        this.setState({\n          winner: player,\n          winningMoves\n        });\n        return true;\n      }\n    };\n\n    this.addMove = (x, y) => {\n      let playerTurn = this.state.stepNumber % 2 === 0 ? 'red' : 'blue';\n      const nextPlayerTurn = playerTurn === 'red' ? 'blue' : 'red';\n      let availablePosition = null;\n\n      for (let position = this.state.rows - 1; position >= 0; position--) {\n        if (!this.getPiece(x, position)) {\n          availablePosition = position;\n          break;\n        }\n      }\n\n      let moves = this.state.moves.slice(0, this.state.stepNumber);\n      let history = this.state.history.slice(0, this.state.stepNumber);\n\n      if (availablePosition != null) {\n        this.setState({\n          moves: moves.concat({\n            x,\n            y: availablePosition,\n            player: playerTurn\n          }),\n          playerTurn: nextPlayerTurn,\n          history: history.concat({\n            moves: moves,\n            player: playerTurn\n          }),\n          stepNumber: this.state.stepNumber + 1\n        }, () => this.checkWinner(x, availablePosition, playerTurn));\n      }\n    };\n  }\n\n  renderBoard() {\n    const {\n      rows,\n      columns,\n      winner\n    } = this.state;\n    const rowsDisplay = [];\n\n    for (let row = 0; row < this.state.rows; row += 1) {\n      const columnDisplay = [];\n\n      for (let column = 0; column < this.state.columns; column += 1) {\n        const piece = this.getPiece(column, row);\n        const winner = this.isWinner(column, row);\n        columnDisplay.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => {\n            this.addMove(column, row);\n          },\n          style: {\n            width: '8vw',\n            height: '8vw',\n            backgroundColor: winner ? 'pink' : 'yellow',\n            boxShadow: winner ? '0px 0px 10px #fff' : undefined,\n            display: 'flex',\n            padding: 5,\n            cursor: 'pointer'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              borderRadius: '10%',\n              backgroundColor: 'white',\n              flex: 1,\n              display: 'flex'\n            },\n            children: piece ? /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                backgroundColor: piece.player,\n                flex: 1,\n                borderRadius: '50%',\n                border: '1px solid #333'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 23\n            }, this) : undefined\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this));\n      }\n\n      rowsDisplay.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'row'\n        },\n        children: columnDisplay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 7\n      }, this));\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: 'white',\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: [winner && /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: this.resetBoard,\n        style: {\n          position: 'absolute',\n          left: 0,\n          right: 0,\n          bottom: 0,\n          top: 0,\n          zIndex: 3,\n          backgroundColor: 'rgba(0,0,0, .5)',\n          display: 'flex',\n          justifyContent: 'center',\n          alignContent: 'center',\n          color: '#fff',\n          fontWeight: '200',\n          fontSize: '8vw'\n        },\n        children: `${winner.toUpperCase()} WINS!!`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 20\n      }, this), rowsDisplay]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this);\n  }\n\n  jumpTo(move_num) {\n    console.log(\"jump to step \" + move_num);\n    this.setState({\n      stepNumber: move_num + 1\n    });\n  }\n\n  renderHistory() {\n    let moves = this.state.moves.map((step, move) => {\n      const desc = 'Go to x: ' + step.x + ', y:' + step.y;\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => this.jumpTo(move),\n          children: desc\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this)\n      }, move + 1, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this);\n    });\n    let prepend_list = [/*#__PURE__*/_jsxDEV(\"li\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.jumpTo(-1),\n        children: \"Go to game start\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 38\n      }, this)\n    }, 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 26\n    }, this)];\n    moves = moves.concat([() => {\n      return;\n    }]);\n    return moves;\n  }\n\n  render() {\n    console.log(\"render\");\n    const {\n      style\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: style ? Object.assign({}, styles.container, style) : styles.container,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [this.renderBoard(), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: `Player Turn: ${this.state.playerTurn.toUpperCase()}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.resetBoard,\n          children: \"Clear Board\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n          children: this.renderHistory()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nconst styles = {\n  container: {\n    height: '100%',\n    padding: 5,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n};","map":{"version":3,"sources":["/Users/chaowu/Desktop/CS349/tictactoe/src/App.js"],"names":["React","App","Component","state","rows","columns","moves","history","playerTurn","stepNumber","resetBoard","setState","winner","getPiece","x","y","slice","list","filter","item","isWinner","winningMoves","some","checkWinner","player","column","checkPiece","push","length","console","log","row","i","addMove","nextPlayerTurn","availablePosition","position","concat","renderBoard","rowsDisplay","columnDisplay","piece","width","height","backgroundColor","boxShadow","undefined","display","padding","cursor","borderRadius","flex","border","flexDirection","left","right","bottom","top","zIndex","justifyContent","alignContent","color","fontWeight","fontSize","toUpperCase","jumpTo","move_num","renderHistory","map","step","move","desc","prepend_list","render","style","props","Object","assign","styles","container","alignItems"],"mappings":"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","sourcesContent":["import './App.css'\nimport React from 'react';\n\nexport default class App extends React.Component{\n  state = {\n    rows:6,\n    columns:7,\n    moves:[],\n    history: [{moves:[], playerTurn:'blue'}],\n    playerTurn:'red',\n    stepNumber: 0,\n  };\n\n  resetBoard = ()=>{\n    this.setState({moves:[], winner:null});\n\n  }\n\n  getPiece = (x,y)=>{\n    // console.log(this.state.stepNumber);\n    // console.log(this.state.moves.length);\n    let moves = this.state.moves.slice(0, this.state.stepNumber);\n    const list = moves.filter((item)=>{\n      return (item.x===x && item.y===y);\n    });\n    return list[0];\n  }\n\n  isWinner = (x,y)=>{\n    const {winner, winningMoves} = this.state;\n    if(!winner){\n      return false;\n    }\n    return winningMoves.some(item=>(item.x===x && item.y===y));\n  }\n\n  checkWinner = (x, y, player)=>{\n    //check vertically\n    let winningMoves=[{x,y}];\n    for(let column = x+1; column<x+4; column+=1){\n      const checkPiece = this.getPiece(column, y);\n      if(checkPiece && checkPiece.player === player){\n        winningMoves.push({x:column, y:y});\n      }else{\n        break;\n      }\n    }\n    for(let column = x-1; column>x-4; column-=1){\n      const checkPiece = this.getPiece(column, y);\n      if(checkPiece && checkPiece.player ===player){\n        winningMoves.push({x:column, y:y});\n      }else{\n        break;\n      }\n    }\n\n    if(winningMoves.length>3){\n      console.log('winner',winningMoves)\n      this.setState({winner:player, winningMoves});\n      return true;\n    }\n\n    //check horizontally\n    winningMoves=[{x,y}];\n    for(let row = y+1; row<y+4; row+=1){\n      const checkPiece = this.getPiece(x, row);\n      if(checkPiece && checkPiece.player ===player){\n        winningMoves.push({x:x, y:row});\n      }else{\n        break;\n      }\n    }\n\n    for(let row = y-1; row>y-4; row-=1){\n      const checkPiece = this.getPiece(x,row);\n      if(checkPiece && checkPiece.player ===player){\n        winningMoves.push({x:x, y:row});\n      }else{\n        break;\n      }\n    }\n\n    if(winningMoves.length>3){\n      console.log('winner',winningMoves)\n      this.setState({winner:player, winningMoves});\n      return true;\n    }\n\n    //check diagnalleft\n    winningMoves=[{x,y}];\n    for(let i = 1; i<4; i+=1){\n      const checkPiece = this.getPiece(x+i, y+i);\n      if(checkPiece && checkPiece.player ===player){\n        winningMoves.push({x:x+i, y:y+i});\n      }else{\n        break;\n      }\n    }\n\n    for(let i = 1; i<4; i+=1){\n      const checkPiece = this.getPiece(x-i,y-i);\n      if(checkPiece && checkPiece.player ===player){\n        winningMoves.push({x:x-i, y:y-i});\n      }else{\n        break;\n      }\n    }\n\n    if(winningMoves.length>3){\n      console.log('winner',winningMoves)\n      this.setState({winner:player, winningMoves});\n      return true;\n    }\n\n    //check diagnalright\n    winningMoves=[{x,y}];\n    for(let i = 1; i<4; i+=1){\n      const checkPiece = this.getPiece(x-i, y+i);\n      if(checkPiece && checkPiece.player ===player){\n        winningMoves.push({x:x-i, y:y+i});\n      }else{\n        break;\n      }\n    }\n\n    for(let i = 1; i<4; i+=1){\n      const checkPiece = this.getPiece(x+i,y-i);\n      if(checkPiece && checkPiece.player ===player){\n        winningMoves.push({x:x+i, y:y-i});\n      }else{\n        break;\n      }\n    }\n\n    if(winningMoves.length>3){\n      console.log('winner',winningMoves)\n      this.setState({winner:player, winningMoves});\n      return true;\n    }\n  }\n\n  addMove = (x,y)=>{\n    let playerTurn = this.state.stepNumber % 2 === 0 ? 'red' : 'blue';\n    const nextPlayerTurn = playerTurn === 'red' ? 'blue' : 'red';\n    let availablePosition = null;\n    for(let position=this.state.rows-1; position>=0; position--){\n      if(!this.getPiece(x,position)){\n        availablePosition = position;\n        break;\n      }\n    }\n\n    let moves = this.state.moves.slice(0, this.state.stepNumber);\n    let history = this.state.history.slice(0, this.state.stepNumber);\n    if(availablePosition!=null){\n      this.setState(\n        {\n          moves:moves.concat({x, y:availablePosition, player:playerTurn}),\n          playerTurn:nextPlayerTurn,\n          history:history.concat({moves:moves, player:playerTurn}),\n          stepNumber:this.state.stepNumber+1,\n        },()=> this.checkWinner(x,availablePosition, playerTurn));\n    }\n  }\n\n\n  renderBoard(){\n    const {rows, columns, winner}= this.state;\n    const rowsDisplay = [];\n\n    for(let row=0; row<this.state.rows; row+=1){\n      const columnDisplay = [];\n      for(let column=0; column<this.state.columns; column+=1){\n        const piece = this.getPiece(column,row);\n        const winner= this.isWinner(column, row);\n        columnDisplay.push(\n          <div onClick={()=>{this.addMove(column, row)}} style={{width:'8vw', height:'8vw', backgroundColor: winner? 'pink':'yellow', boxShadow: winner?'0px 0px 10px #fff':undefined, \n          display:'flex', padding: 5, cursor:'pointer'}}>\n            <div style={{borderRadius:'10%', backgroundColor:'white', flex:1, display:'flex'}}>\n              {piece? <div style={{backgroundColor: piece.player, flex:1, borderRadius:'50%', border:'1px solid #333'}}/>:undefined}\n            </div>\n          </div>\n        );\n      }\n      rowsDisplay.push(\n      <div style={{display:'flex', flexDirection:'row'}}>{columnDisplay}</div>\n      );\n    }\n\n    return(\n      <div style={{backgroundColor: 'white', display:'flex', flexDirection:'column'}}>\n        {winner && <div onClick={this.resetBoard} style={{position:'absolute',left:0,right:0,bottom:0,top:0, zIndex:3, backgroundColor:'rgba(0,0,0, .5)',\n      display:'flex', justifyContent:'center', alignContent:'center', color:'#fff', fontWeight:'200', fontSize:'8vw' }}>{`${winner.toUpperCase()} WINS!!`}</div>}\n        {rowsDisplay}\n      </div>\n    );\n  }\n\n  jumpTo(move_num) {\n    console.log(\"jump to step \" + move_num);\n    this.setState({\n      stepNumber:move_num+1,\n    });\n\n  }\n\n  renderHistory(){    \n    let moves = this.state.moves.map((step, move) => {\n      const desc = \n        'Go to x: ' + step.x + ', y:' + step.y;\n      return (\n        <li key={move+1}>\n          <button onClick={() => this.jumpTo(move)}>{desc}</button>\n        </li>\n      );\n    });\n\n    let prepend_list = [(<li key={0}><button onClick={() => this.jumpTo(-1)}>Go to game start</button></li>)];\n    moves = moves.concat([\n      () => {\n        return ;\n      }]);\n    return moves;\n  }\n\n\n  render(){\n    console.log(\"render\");\n    const {style} = this.props;\n    return (\n      <div style={style ? Object.assign({}, styles.container, style):styles.container}>\n        <div>\n          {this.renderBoard()}\n          <p>{`Player Turn: ${this.state.playerTurn.toUpperCase()}`}</p>\n          <button onClick={this.resetBoard}>Clear Board</button>\n           <ol>{this.renderHistory()}</ol>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst styles = {\n  container:{\n    height:'100%',\n    padding:5,\n    display:'flex',\n    justifyContent:'center',\n    alignItems:'center'\n  }\n}"]},"metadata":{},"sourceType":"module"}